102.2 Установка загрузчика

Студент должен уметь выбирать, устанавливать и настраивать загрузчик ОС.

Изучаем :

доступные загрузочные разделы;
установку и настройку GRUB;
настройку GRUB 2;
взаимодействие с загрузчиком.

Термины и утилиты:

menu.lst, grub.cfg и grub.conf
grub-install
grub-mkconfig
MBR - Главная загрузочная запись (master boot record, MBR) код и данные, необходимые для последующей загрузки операционной системы и расположенные в первых физических секторах (чаще всего в самом первом) на жёстком диске или другом устройстве хранения информации. 

При включении ПК инициализируется ПО материнской платы, которое после всех проверок передает управление первым секторам основного жесткого диска. В этих секторах находятся файлы загрузчика – специального ПО, позволяющего загрузить ядро ОС в оперативную память.

При первичной инициализации жесткого диска происходит выбор формата таблицы разделов: MBR (с ним работает BIOS) или более современный GUID (с ним работает UEFI).

Существует три самых популярных загрузчика Linux систем: LiLo, Grub и Grub2. Большинство современных дистрибутивов Linux используют Grub2.

Для настройки загрузчика Lilo используется команда liloconfig. Текущую конфигурацию можно увидеть в файле /etc / lilo . conf. Конфигурационный файл прост для понимания, в нем указаны дисковые устройства, образы ядер, выводимый на экран при загрузке текст и т.д.

Настройки Grub хранятся в файле / boot** / grub / grub. conf или / boot / grub / menu. lst.** В нем, помимо основных опций загрузки, указаны все доступные для загрузки ОС и порядок обращения к ним.

Grub2 является отдельным проектом, полностью созданным с ноля. Для его установки можно воспользоваться командой grub** - **install , например:

grub - install /dev/sda_ (установить загрузчик на устройство /dev/sda );_

Основным файлом конфигурации выбора ОС является файл /boot/grub/grub.cfg , генерируемый автоматически. 
Общие настройки загрузчика можно увидеть в файле /etc/default/grub. 
Скрипты, используемые загрузчиком находятся в директории /etc/grub.d.

Изменения, внесенные в настройки загрузчика можно загрузить в файл конфигурации командой update-grub.
Для автоматического создания файла конфигурации (/boot/grub/grub.cfg ) с типовым меню можно воспользоваться утилитой grub - mkconfig.

dd if=/dev/sda of=/root/backup.mbr bs=512 count=1
скопировать input file откуда оutput file куда block 512 B первый блок - резервное копирование MBR
grub-install --version - узнать версию загрузчика GRUB
memtest - образ для проверки оперативной памяти в GRUB2


